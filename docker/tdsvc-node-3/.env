# TimeDelta Service configuration

# Host identification
HOST_ID=dev-docker-3

# Logging
LOG_LEVEL=INFO
LOGFILE=/app/log/tdsvc-node-3.log

# RabbitMQ connection
RMQ_SERVER_URI=amqp://guest:guest@rabbitmq:5672/
RMQ_EXCHANGE=tdsvc_exchange
RMQ_DLX_EXCHANGE=dlx_tdsvc_exchange
RMQ_PREFETCH_COUNT=1

METRICS_PORT=18223
METRICS_HOST=0.0.0.0

# Intervals (seconds)
KEEPALIVE_INTERVAL=5
TIME_QUERY_INTERVAL=2
NEIGHBOR_DISCOVERY_INTERVAL=5
NEIGHBOR_AGE_TIMEOUT=10

# Exclude dead neighbours from discovery broadcasts (True/False)
# When True, only alive neighbours are shared with other hosts
EXCLUDE_DEAD_NEIGHBOURS=True

# RTT-based Clock Delta Filtering
# Window size for keeping recent measurements
MEASUREMENTS_WINDOW_SIZE=20
# Number of lowest-RTT measurements to use for filtered mean
FILTERED_MEASUREMENTS_COUNT=5

# Pending requests cleanup
# Base TTL for request IDs (actual TTL = base + RESPONSE_DELAY * 2)
PENDING_REQUESTS_MAX_AGE=15

# Optional static delay (in seconds) before sending time response
# Makes RTT variations proportionally smaller. Default: 0 (disabled)
# Example: 5.0 adds 5-second delay, making 100ms RTT jitter only 2% of total
# WARNING: Slows down measurement convergence. RTT filtering is usually better.
RESPONSE_DELAY=6.0
